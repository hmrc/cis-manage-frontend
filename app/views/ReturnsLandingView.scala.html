@*
 * Copyright 2025 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import views.html.components._
@import viewmodels.ReturnLandingViewModel
@import config.FrontendAppConfig

@this(
    layout: templates.Layout,
    govukButton: GovukButton,
    h1: H1,
    h2: H2,
    twoColumnGrid: TwoColumnGrid,
    oneColumnGrid: OneColumnGrid,
    headingLink: HeadingLink,
    paragraph: Paragraph,
    sectionBreak: SectionBreak,
    link: Link,
    aside: Aside,
    nav: Nav,
    paragraphWithLinks: ParagraphWithLinks,
    notificationBannerCard: NotificationBannerCard,
    caption: Caption
)

@(contractorName: String, returnsList: Seq[ReturnLandingViewModel])(implicit request: Request[_], config: FrontendAppConfig, messages: Messages)

@sidebar = {
    @aside("returnsLanding.aside.h2", nav(Seq(
        "returnsLanding.aside.link1" -> config.govUkCISGuidanceUrl,
        "returnsLanding.aside.link2" -> config.cisMonthlyReturnsGuidanceUrl,
        "returnsLanding.aside.link3" -> config.cis340PenaltiesForLateReturnsUrl,
        "returnsLanding.aside.link4" -> config.cisLateFilingPenaltyUrl
    )))
}

@layout(
    pageTitle = titleNoForm(messages("returnsLanding.title")),
    showSignOut = false,
    sidebar = Some(sidebar)
) {

    @notificationBannerCard(
        bannerTitle = "Important",
        content = HtmlFormat.fill(Seq(
            h2("returnsLanding.banner.header"),
            paragraph(messages("returnsLanding.banner.p1")),

        paragraphWithLinks(
                linkTextUrlOne = "returnsLanding.banner.p2.link1",
                linkUrlOne = "#",
                suffixTextKey = "returnsLanding.banner.p2.text",
                linkTextUrlTwo = "returnsLanding.banner.p2.link2",
                linkUrlTwo = config.cisDateConfirmNilPaymentsUrl
            )
        ))
    )

    @caption("ABC Construction Ltd")
    @h1(messages("returnsLanding.heading"))

    @twoColumnGrid(
        HtmlFormat.fill(Seq(
            headingLink("returnsLanding.fileStandardReturn.h3.link", "#"),
            paragraph("returnsLanding.fileStandardReturn.p1")
        )),
        HtmlFormat.fill(Seq(
            headingLink("returnsLanding.fileNilReturn.h3.link", "#"),
            paragraph("returnsLanding.fileNilReturn.p1")
        ))
    )

    @twoColumnGrid(
        HtmlFormat.fill(Seq(
            headingLink("returnsLanding.amendReturn.h3.link", "#"),
            paragraph("returnsLanding.amendReturn.p1")
        )),
        HtmlFormat.fill(Seq(
            headingLink("returnsLanding.paymentsAndDeductions.h3.link", "#"),
            paragraph("returnsLanding.paymentsAndDeductions.p1")
        ))
    )

    @oneColumnGrid(
        HtmlFormat.fill(Seq(
            headingLink("returnsLanding.noticesAndStatements.h3.link", "#"),
            paragraph("returnsLanding.noticeAndStatements.p1")
        ))
    )

    @sectionBreak()

    @h2(messages("returnsLanding.recentCisReturns.h2"))

    <table id="" class="govuk-table" data-module="moj-sortable-table">
        <thead class="govuk-table__head">
        <tr class="govuk-table__row">
            <th class="govuk-table__header" scope="col">@messages("returnsLanding.taxMonth.th")</th>
            <th class="govuk-table__header" scope="col">@messages("returnsLanding.type.th")</th>
            <th class="govuk-table__header" scope="col">@messages("returnsLanding.dateSubmitted.th")</th>
            <th class="govuk-table__header" scope="col">@messages("returnsLanding.status.th")</th>
        </tr>
        </thead>
        <tbody class="govuk-table__body">
        @returnsList.map { item =>
        <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">@item.taxMonth</th>
            <td class="govuk-table__cell">@item.returnType</td>
            <td class="govuk-table__cell">@item.dateSubmitted</td>
            <td class="govuk-table__cell"> <strong class="govuk-tag govuk-tag--green">@item.status</strong></td>
        </tr>
        }
        </tbody>
    </table>

    @link(linkTextKey = "returnsLanding.viewReturnsHistory.link", linkUrl = "#")
}
